#!/bin/bash
echo "# begin build properties"
echo "# autogenerated by buildinfo.sh"

echo "ro.build.id=$BUILD_ID"

# if match pattern "VT58_*"
if egrep -q '^VT58_.*$' <(echo "$ANDROID_VER_REL") >/dev/null 2>&1; then
  id_version="${ANDROID_VER_REL/VT58_/}"
else
  id_version="EMEA_DS.1.234.56" # fixed string if not found any matched pattern
fi
id_full="${id_version}"
echo "ro.build.display.id=${id_full}"
#echo "ro.build.display.id=$BUILD_DISPLAY_ID"

#if [ -n "$MTK_SHARE_MODEM_CURRENT" ] && [ "$MTK_SHARE_MODEM_CURRENT" -eq "1" ]; then
#  echo "ro.build.display.id=${BUILD_DISPLAY_ID}.SS"
#elif [ -n "$MTK_SHARE_MODEM_CURRENT" ] && [ "$MTK_SHARE_MODEM_CURRENT" -eq "2" ]; then
#  echo "ro.build.display.id=${BUILD_DISPLAY_ID}.DS"
#else
#  echo "ro.build.display.id=$BUILD_DISPLAY_ID"
#fi

echo "ro.build.version.incremental=$BUILD_NUMBER"
echo "ro.custom.build.version=$CUSTOM_BUILD_VERNO"
echo "ro.build.version.sdk=$PLATFORM_SDK_VERSION"
echo "ro.build.version.codename=$PLATFORM_VERSION_CODENAME"
echo "ro.build.version.release=$PLATFORM_VERSION"

# Let Android version have a default value if env var is empty
if [ -n "$ANDROID_VER_REL" ]; then
  echo "ro.build.version.software=$ANDROID_VER_REL"
else
  echo "ro.build.version.software=VT58_EMEA_DS.1.234.56"
fi

# Let Modem version have a default value if env var is empty
if [ -n "$MODEM_VER_REL" ]; then
  echo "ro.build.version.modem=$MODEM_VER_REL"
else
  echo "ro.build.version.modem=VT58_EMEA_DS.2.345.67"
fi

echo "ro.build.date=`date`"
echo "ro.build.date.utc=`date +%s`"
echo "ro.build.type=$TARGET_BUILD_TYPE"
echo $USER | grep -iq "^mtk"
if [[ $? == 0 && $TARGET_BUILD_VARIANT == "user" ]] ; then
  echo "ro.build.user=android-builder"
else
  echo "ro.build.user=$USER"
fi
echo "ro.build.host=`hostname`"
echo "ro.build.tags=$BUILD_VERSION_TAGS"
#echo "ro.product.model=$PRODUCT_MODEL"
echo "ro.product.model=B15"
echo "ro.product.brand=CAT"
echo "ro.product.name=B15"
echo "ro.product.device=TOUGH"
echo "ro.product.board=TOUGH"
echo "ro.product.cpu.abi=$TARGET_CPU_ABI"
if [ -n "$TARGET_CPU_ABI2" ] ; then
  echo "ro.product.cpu.abi2=$TARGET_CPU_ABI2"
fi
echo "ro.product.manufacturer=$PRODUCT_MANUFACTURER"
#if [ -n "$PRODUCT_DEFAULT_LANGUAGE" ] ; then
#  echo "ro.product.locale.language=$PRODUCT_DEFAULT_LANGUAGE"
#fi
#if [ -n "$PRODUCT_DEFAULT_REGION" ] ; then
#  echo "ro.product.locale.region=$PRODUCT_DEFAULT_REGION"
#fi
echo "ro.wifi.channels=$PRODUCT_DEFAULT_WIFI_CHANNELS"
echo "ro.board.platform=$TARGET_BOARD_PLATFORM"

echo "# ro.build.product is obsolete; use ro.product.device"
echo "ro.build.product=B15"

echo "# Do not try to parse ro.build.description or .fingerprint"
echo "ro.build.description=$PRIVATE_BUILD_DESC"
echo "ro.build.fingerprint=$BUILD_FINGERPRINT"
echo "ro.build.flavor=$FLAVOR"
echo "ro.build.characteristics=$TARGET_AAPT_CHARACTERISTICS"

# Set default language and country to fix OOBE
echo "persist.sys.language=en"
echo "persist.sys.country=US"

echo "# end build properties"
